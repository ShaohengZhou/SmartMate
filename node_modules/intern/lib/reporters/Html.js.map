{"version":3,"file":"Html.js","sourceRoot":"","sources":["../../../../src/lib/reporters/Html.ts"],"names":[],"mappings":"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","sourcesContent":["import { Executor } from '../executors/Executor';\nimport Reporter, { eventHandler, ReporterProperties } from './Reporter';\nimport Test from '../Test';\nimport Suite from '../Suite';\n\n// Needs a URLSearchParams polyfill\n\n/**\n * The Html reporter displays an HTML report in the browser.\n */\nexport default class Html extends Reporter implements HtmlProperties {\n  document: Document;\n\n  location: Location;\n\n  protected _reportContainer: Element | undefined;\n\n  // Div element to hold buttons above the summary table\n  protected _reportControls: Element | undefined;\n\n  // tbody element to append report rows to\n  protected _reportNode: Element | undefined;\n\n  // tr element containing summary info\n  protected _summaryNode: Element | undefined;\n\n  // Array of td elements in 'summaryNode'\n  protected _summaryNodes: Element[] = [];\n\n  // Accumulator for total number of suites\n  protected _suiteCount = 0;\n\n  // Accumulator for total number of tests\n  protected _testCount = 0;\n\n  // Tests in the current suite\n  protected _testsInSuite = 0;\n\n  // Current test index\n  protected _testIndex = 0;\n\n  // ID's of tests that have been processed\n  protected _processedTests: any = {};\n\n  protected _failedFilter: any = null;\n\n  protected _fragment: DocumentFragment;\n\n  protected _indentLevel = 0;\n\n  protected _runningSuites: any = {};\n\n  constructor(executor: Executor, options: HtmlOptions = {}) {\n    super(executor, options);\n    this.document = options.document || window.document;\n    this.location = options.location || window.location;\n    this._fragment = this.document.createDocumentFragment();\n  }\n\n  /**\n   * Generate the summary header at the top of the report.\n   *\n   * @param suite The root suite of the test session\n   */\n  protected _generateSummary(suite: Suite): void {\n    const document = this.document;\n\n    if (this._summaryNodes.length === 0) {\n      return;\n    }\n\n    const duration = suite.timeElapsed!;\n    const numSkippedTests =\n      suite.numTests - (suite.numFailedTests + suite.numPassedTests);\n    const percentPassed = Math.round(\n      (1 - suite.numFailedTests / suite.numTests) * 100\n    );\n    let rowInfo = [\n      this._suiteCount,\n      this._testCount,\n      formatDuration(duration),\n      numSkippedTests,\n      suite.numFailedTests,\n      percentPassed + '%'\n    ];\n\n    for (let i = 0; i < rowInfo.length; ++i) {\n      this._summaryNodes[i].appendChild(\n        document.createTextNode(<string>rowInfo[i])\n      );\n    }\n\n    // Create a toggle to only show failed tests\n    if (suite.numFailedTests > 0) {\n      let failedFilter = (this._failedFilter = document.createElement('div'));\n      failedFilter.className = 'failedFilter';\n      let failedToggle = document.createElement('input');\n      failedToggle.id = 'failedToggle';\n      failedToggle.type = 'checkbox';\n\n      let failedLabel = document.createElement('label');\n      failedLabel.htmlFor = 'failedToggle';\n      failedLabel.innerHTML = 'Show only failed tests';\n\n      failedFilter.appendChild(failedToggle);\n      failedFilter.appendChild(failedLabel);\n\n      failedToggle.onclick = function(this: GlobalEventHandlers) {\n        const input = <HTMLInputElement>this;\n        if (input.checked) {\n          document.body.className += ' hidePassed';\n        } else {\n          document.body.className = document.body.className.replace(\n            /\\bhidePassed\\b/,\n            ' '\n          );\n        }\n      };\n    }\n  }\n\n  protected _injectCSS() {\n    const document = this.document;\n    // Prevent FOUC\n    const style = document.createElement('style');\n    style.innerHTML = 'body { visibility: hidden; }';\n\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = this.executor.config.internPath + 'lib/reporters/html/html.css';\n\n    document.head!.appendChild(style);\n    document.head!.appendChild(link);\n  }\n\n  protected _getIndentLevel(node: Element) {\n    // second child always has a class of indentN\n    const child: Element = node.children[1];\n\n    // get the indentN class\n    const indent = child.className.split(' ').filter(function(name: string) {\n      return name.indexOf('indent') >= 0;\n    })[0];\n\n    return indent ? parseInt(indent.slice('indent'.length), 10) : 0;\n  }\n\n  /**\n   * Set the collapsed state of a node and return the new state.\n   *\n   * @param {DOMNode} node A suite node\n   * @param {boolean} collapsed Set the collapsed state, or toggle if\n   * undefined\n   */\n  protected _setCollapsed(node: Element, shouldCollapse?: boolean) {\n    let indentDelta: number;\n    let initialIndent = this._getIndentLevel(node);\n\n    const collapsed = containsClass(node, 'collapsed');\n    if (shouldCollapse === collapsed) {\n      // Don't do anything if the current collapse state is the the same\n      // as the requested\n      return;\n    }\n\n    // Use the given collapsed state or toggle the existing state\n    shouldCollapse = shouldCollapse == null ? !collapsed : shouldCollapse;\n    if (shouldCollapse) {\n      addClass(node, 'collapsed');\n    } else {\n      removeClass(node, 'collapsed');\n    }\n\n    // node won't exist after the last test in a suite\n    while ((node = <Element>node.nextSibling)) {\n      indentDelta = this._getIndentLevel(node) - initialIndent;\n\n      // Stop looping when we encounter a row that's not indented more\n      // than the suite being updated\n      if (indentDelta === 0) {\n        break;\n      }\n\n      // Child suites of the suite being updated should always be\n      // collapsed\n      if (containsClass(node, 'suite')) {\n        addClass(node, 'collapsed');\n      }\n\n      // Only show children one level under the suite being updated when\n      // expanding\n      (<HTMLElement>node).style.display =\n        !shouldCollapse && indentDelta === 1 ? '' : 'none';\n    }\n  }\n\n  @eventHandler()\n  error(error: Error) {\n    const document = this.document;\n    let htmlError = this.formatError(error)\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;');\n    let errorNode = document.createElement('div');\n    errorNode.style.cssText = 'color: red; font-family: sans-serif;';\n    errorNode.innerHTML =\n      '<h1>Fatal error</h1>' +\n      '<pre style=\"padding: 1em; background-color: #f0f0f0;\">' +\n      htmlError +\n      '</pre>';\n    document.body.appendChild(errorNode);\n  }\n\n  @eventHandler()\n  runStart() {\n    const document = this.document;\n    this._reportContainer = document.createElement('div');\n    const headerNode = document.createElement('h1');\n    let tableNode: Element;\n    let tmpNode: Element;\n    let rowNode: Element;\n    let cellNode: Element;\n    const summaryHeaders = [\n      'Suites',\n      'Tests',\n      'Duration',\n      'Skipped',\n      'Failed',\n      'Success Rate'\n    ];\n\n    const fragment = this._fragment;\n\n    // Page header\n    const headerTitle = document.createElement('span');\n    headerTitle.className = 'headerTitle';\n    headerTitle.innerHTML = 'Intern Test Report';\n\n    headerNode.className = 'reportHeader';\n    const headerLogo = document.createElement('img');\n    headerLogo.className = 'headerLogo';\n    headerLogo.src =\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAACACAMAAADwF' +\n      'UHEAAADAFBMVEUAAAAAAAAAAABVVVVAQEBmZmZVVVVtbW1gYGBVVVVmZmZdXV1q' +\n      'ampiYmJtbW1mZmZwcHBpaWljY2Nra2tmZmZtbW1oaGhvb29qampwcHBsbGxoaGh' +\n      'tbW1qampvb29ra2twcHBsbGxxcXFtbW1qampubm5ra2tvb29sbGxwcHBtbW1xcX' +\n      'Fubm5sbGxvb29tbW1wcHBtbW1wcHBubm5xcXFvb29tbW1vb29tbW1wcHBubm5wc' +\n      'HBvb29xcXFvb29tbW1wcHBubm5wcHBubm5xcXFvb29xcXFvb29ubm5wcHBubm5w' +\n      'cHBvb29xcXFvb29xcXFwcHBubm5wcHBwcHBvb29xcXFvb29ubm5xcXFwcHBvb29' +\n      'wcHBwcHBvb29xcXFwcHBubm5wcHBvb29wcHBvb29xcXFvb29xcXFwcHBvb29wcH' +\n      'Bvb29wcHBvb29xcXFwcHBxcXFwcHBvb29wcHBvb29wcHBvb29xcXFwcHBxcXFwc' +\n      'HBvb29wcHBubm5wcHBwcHBwcHBxcXFwcHBvb29wcHBvb29xcXFwcHBwcHBvb29x' +\n      'cXFwcHBvb29wcHBwcHBxcXFwcHBxcXFwcHBxcXFwcHBvb29wcHBwcHBxcXFwcHB' +\n      'xcXFwcHBxcXFwcHBwcHBwcHBxcXFwcHBxcXFwcHBxcXFwcHBwcHBxcXFwcHBxcX' +\n      'FwcHBxcXFwcHBwcHBwcHBwcHBxcXFwcHBwcHBxcXFwcHBwcHBwcHBwcHBxcXFwc' +\n      'HBxcXFwcHBxcXFwcHBwcHBwcHBwcHBxcXFwcHBxcXFwcHBxcXFwcHBwcHBxcXFw' +\n      'cHBxcXFxcXFwcHBwcHBxcXFwcHBwcHBxcXFwcHBxcXFwcHBxcXFwcHBxcXFwcHB' +\n      'wcHBxcXFwcHBxcXFwcHBxcXFwcHBxcXFwcHBwcHBxcXFwcHBxcXFwcHBxcXFwcH' +\n      'BxcXFxcXFwcHBxcXFwcHBxcXFwcHBxcXFxcXFwcHBxcXFxcXFwcHBwcHBxcXFwc' +\n      'HBxcXFxcXFwcHBxcXFxcXFwcHBxcXF+cGExAAAA/3RSTlMAAQIDBAUGBwgJCgsM' +\n      'DQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs' +\n      '8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlRVVldYWFlaW11eX2BhYmNkZWZnaGlqa2' +\n      'xtbm9wcXJzdHV2d3h5ent8fX9/gIKDhIWGh4iJi4yMjY6PkJGSk5SVlpeYmZqbn' +\n      'J2en6Gio6SlpqeoqaqrrK2ur7CxsrO0tre4ubq7vL2+v8DBwsPExcbHyMnKy8zN' +\n      'ztDR0tLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vPz9PX29/j5+fr' +\n      '6+/z8/f6oCt5hAAAJJUlEQVQYGcXBC0DU9QEH8O9xgDwEM0BTYVn4thpmvpN02W' +\n      'qVpaXNYlPM0koW+cy0BepYG5Ca1lDLMrXyEenS6GFiTiSxttTIFJsvFFB5TIEdg' +\n      '919+/3+/zu5x/9/AnF3nw+aI/C2qcs27T1RXlVdW1r45ZY/TxwYAi8yDF68v47O' +\n      '6velPxAKrxi06iz11HyYeC08LPSJA3Sv9t27/OA5IXPPswmKpgbCMwKfOcMmOpU' +\n      'UBA8YcYTNUDwzFK2s3UoLm6c0yQ+tKfoEm2//bWhNt+xm85mXt0MrMjxZweYrfh' +\n      'StKfYrtsDWCLSiwEy2wKk70JomN7D5GlKMaEW/Y0vsikarCI0b8+zLb11kS5SNw' +\n      'M/Uc2LGJ6f4c9Q9jhbzHzhjSwlbQbofWiJk3OZLbC1b26K52ozZcImt6etOaJae' +\n      'WRVsbUe7oukGZFvoAad6oYmi11roGSW3oikMz12mx5QPxdV12E5PqhiAq+lzmp5' +\n      '1IQ7uxZXS00r7wp3uF+l5xbHQF1hAbzgaBV2Z9I78UOiIrqOXfOQPbRn0mhVwEN' +\n      'StXw8jhEmPjb7nnoenv1lFz3saNuGPvvGdheSlVZG44k56Xv2dkALHf2SizXehU' +\n      'Pmn1dALyn4BXJ9eSnuzoVpH78gfsqGejrZDMY6+cwGKAvrOeUix9KHjkCbQh/ZB' +\n      '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' +\n      'wAAAABJRU5ErkJggg==';\n\n    headerNode.appendChild(headerLogo);\n    headerNode.appendChild(headerTitle);\n    fragment.appendChild(headerNode);\n\n    // Report container\n    this._reportContainer.className = 'internReportContainer';\n    this._fragment.appendChild(this._reportContainer);\n\n    // Summary table\n    tableNode = document.createElement('table');\n    tableNode.className = 'summary';\n    this._summaryNode = document.createElement('div');\n\n    tmpNode = document.createElement('thead');\n    rowNode = document.createElement('tr');\n    for (let i = 0; i < summaryHeaders.length; i++) {\n      cellNode = document.createElement('td');\n\n      const cellContent = document.createElement('div');\n      cellContent.className =\n        'summaryContent ' +\n        summaryHeaders[i].toLowerCase().replace(/\\s(.)/g, function(_, char) {\n          return char.toUpperCase();\n        });\n\n      const cellTitle = document.createElement('span');\n      cellTitle.className = 'summaryTitle';\n      cellTitle.appendChild(document.createTextNode(summaryHeaders[i]));\n\n      const cellData = document.createElement('div');\n      cellData.className = 'summaryData';\n\n      this._summaryNodes[i] = document.createElement('span');\n      this._summaryNode.appendChild(this._summaryNodes[i]);\n\n      cellData.appendChild(this._summaryNodes[i]);\n      cellContent.appendChild(cellTitle);\n      cellContent.appendChild(cellData);\n      cellNode.appendChild(cellContent);\n      rowNode.appendChild(cellNode);\n    }\n\n    tmpNode.appendChild(rowNode);\n    tableNode.appendChild(tmpNode);\n    this._reportContainer.appendChild(tableNode);\n\n    // Controls\n    this._reportControls = document.createElement('div');\n    this._reportControls.className = 'reportControls';\n    this._reportControls.appendChild(document.createElement('div'));\n    this._reportControls.appendChild(document.createElement('div'));\n    this._reportContainer.appendChild(this._reportControls);\n\n    // Report table\n    tableNode = document.createElement('table');\n    tableNode.className = 'report';\n    this._reportNode = document.createElement('tbody');\n    tableNode.appendChild(this._reportNode);\n    this._reportContainer.appendChild(tableNode);\n  }\n\n  @eventHandler()\n  suiteStart(suite: Suite) {\n    // There's a top-level Suite that contains all user-created suites\n    // We want to skip it\n    if (!suite.hasParent) {\n      return;\n    }\n\n    this._testsInSuite = suite.tests.length;\n    this._testIndex = 0;\n    this._processedTests = {};\n\n    const document = this.document;\n    const rowNode = document.createElement('tr');\n\n    // Status cell\n    let cellNode = document.createElement('td');\n    cellNode.className = 'testStatus';\n    rowNode.appendChild(cellNode);\n\n    cellNode = document.createElement('td');\n\n    this._suiteCount++;\n\n    cellNode.className = 'title';\n    cellNode.appendChild(this.createLinkNode(suite));\n    rowNode.className = 'suite';\n    rowNode.appendChild(cellNode);\n    this._reportNode!.appendChild(rowNode);\n\n    if (this._indentLevel) {\n      cellNode.className += ' indent' + Math.min(this._indentLevel, 5);\n      rowNode.className += ' indent';\n    }\n\n    this._runningSuites[suite.id] = { node: rowNode };\n    ++this._indentLevel;\n  }\n\n  @eventHandler()\n  suiteEnd(suite: Suite) {\n    const document = this.document;\n\n    const numTests = suite.numTests;\n    const numFailedTests = suite.numFailedTests;\n    const numPassedTests = suite.numPassedTests;\n    const numSkippedTests = numTests - (numFailedTests + numPassedTests);\n    const hasSuiteFailures = suite.numSkippedTests !== numSkippedTests;\n\n    if (!suite.hasParent) {\n      this._generateSummary(suite);\n\n      // Load styles via webpack\n      require('./html/html.styl');\n\n      document.body.innerHTML = '';\n      document.body.className = '';\n      document.body.appendChild(this._fragment);\n\n      const expandToggle = document.createElement('div');\n      expandToggle.className = 'linkButton';\n      expandToggle.textContent = 'Expand/collapse all';\n\n      const reportControls = this._reportControls!;\n      reportControls.firstElementChild!.appendChild(expandToggle);\n\n      expandToggle.addEventListener('click', () => {\n        const reportNode = this._reportNode!;\n        const shouldExpand = reportNode.querySelector('.collapsed') != null;\n        const suites = reportNode.querySelectorAll('.suite');\n        for (let i = 0; i < suites.length; i++) {\n          this._setCollapsed(suites[i], !shouldExpand);\n        }\n      });\n\n      if (this._failedFilter) {\n        reportControls.lastElementChild!.appendChild(this._failedFilter);\n      } else {\n        const failedNode = document.querySelector('.failed')!;\n        addClass(failedNode, 'success');\n      }\n\n      if (suite.numFailedTests > 0) {\n        const successRateNode = document.querySelector('.successRate')!;\n        addClass(successRateNode, 'failed');\n      }\n\n      if (hasSuiteFailures) {\n        const skippedNode = document.querySelector('.summaryContent.skipped')!;\n        addClass(skippedNode, 'failed');\n      }\n\n      return;\n    }\n\n    const rowNode = this._runningSuites[suite.id].node;\n\n    // Mark a suite as failed if any of its child tests failed, and\n    addClass(\n      rowNode,\n      numFailedTests > 0 || hasSuiteFailures ? 'failed' : 'passed'\n    );\n\n    // Only suites with failed tests will be initially expanded\n    this._setCollapsed(rowNode, numFailedTests === 0 && !hasSuiteFailures);\n\n    let cellNode = document.createElement('td');\n\n    if (numPassedTests > 0) {\n      cellNode.appendChild(document.createTextNode('Passed: '));\n      const testsPassed = document.createElement('span');\n      testsPassed.className = 'success';\n      testsPassed.innerHTML = `${numPassedTests}`;\n      cellNode.appendChild(testsPassed);\n    }\n\n    if (numFailedTests > 0) {\n      cellNode.appendChild(document.createTextNode('Failed: '));\n      const testsFailed = document.createElement('span');\n      testsFailed.className = 'failed';\n      testsFailed.innerHTML = `${numFailedTests}`;\n      cellNode.appendChild(testsFailed);\n    }\n\n    if (numSkippedTests > 0) {\n      cellNode.appendChild(document.createTextNode('Skipped: '));\n      const testsSkipped = document.createElement('span');\n      testsSkipped.innerHTML = `${numSkippedTests}`;\n      cellNode.appendChild(testsSkipped);\n    }\n\n    if (suite.error) {\n      const suiteError = document.createElement('span');\n      suiteError.className = 'failed';\n      suiteError.innerHTML = 'Suite error!';\n      cellNode.appendChild(suiteError);\n    }\n\n    rowNode.addEventListener('click', (event: Event) => {\n      this._setCollapsed(<Element>event.currentTarget);\n    });\n\n    cellNode.className = 'column-info';\n    rowNode.appendChild(cellNode);\n\n    // Duration cell\n    cellNode = document.createElement('td');\n    cellNode.className = 'numeric duration';\n    cellNode.appendChild(\n      document.createTextNode(formatDuration(suite.timeElapsed!))\n    );\n    rowNode.appendChild(cellNode);\n\n    --this._indentLevel;\n\n    // Only update the global tracking variables for top-level suites\n    if (!this._indentLevel) {\n      this._testCount += numTests;\n    }\n\n    this._runningSuites[suite.id] = null;\n  }\n\n  @eventHandler()\n  testEnd(test: Test) {\n    if (test.id in this._processedTests) {\n      return;\n    }\n\n    this._processedTests[test.id] = true;\n\n    this._testIndex++;\n\n    const document = this.document;\n    const rowNode = document.createElement('tr');\n\n    // Status cell\n    let cellNode = document.createElement('td');\n    cellNode.className = 'testStatus';\n    rowNode.appendChild(cellNode);\n\n    cellNode = document.createElement('td');\n\n    if (this._indentLevel) {\n      cellNode.className += ' indent' + this._indentLevel;\n    }\n\n    cellNode.appendChild(this.createLinkNode(test));\n    rowNode.appendChild(cellNode);\n\n    cellNode = document.createElement('td');\n    cellNode.className = 'column-info';\n\n    if (test.error) {\n      rowNode.className = 'testResult failed';\n      cellNode.appendChild(document.createTextNode(test.error.message));\n    } else if (test.skipped != null) {\n      rowNode.className = 'testResult skipped';\n      cellNode.appendChild(document.createTextNode(test.skipped || ''));\n    } else {\n      rowNode.className = 'testResult passed';\n    }\n\n    if (this._testIndex === this._testsInSuite) {\n      rowNode.className = rowNode.className + ' lastTest';\n    }\n\n    rowNode.appendChild(cellNode);\n\n    cellNode = document.createElement('td');\n    cellNode.className = 'numeric duration';\n    cellNode.appendChild(\n      document.createTextNode(\n        test.skipped ? 'Skipped' : formatDuration(test.timeElapsed!)\n      )\n    );\n    rowNode.appendChild(cellNode);\n\n    this._reportNode!.appendChild(rowNode);\n  }\n\n  private createLinkNode(obj: Suite | Test) {\n    const document = this.document;\n    const location = this.location;\n\n    const params = new URLSearchParams(location.search.slice(1) || undefined);\n    params.delete('grep');\n    params.append('grep', obj.id);\n\n    const a = document.createElement('a');\n    a.href = location.origin + location.pathname + `?${params.toString()}`;\n    a.appendChild(document.createTextNode(obj.name!));\n\n    return a;\n  }\n}\n\nexport interface HtmlProperties extends ReporterProperties {\n  document: Document;\n  location: Location;\n}\n\nexport type HtmlOptions = Partial<HtmlProperties>;\n\nfunction containsClass(node: Element, cls: string) {\n  const classes = node.className.split(/\\s+/);\n  return classes.indexOf(cls) !== -1;\n}\n\nfunction addClass(node: Element, cls: string) {\n  const classes = node.className.split(/\\s+/);\n  if (classes.indexOf(cls) !== -1) {\n    return;\n  }\n\n  classes.push(cls);\n  node.className = classes.join(' ');\n}\n\nfunction removeClass(node: Element, cls: string) {\n  const classes = node.className.split(/\\s+/);\n  const index = classes.indexOf(cls);\n  if (index === -1) {\n    return;\n  }\n\n  classes.splice(index, 1);\n  node.className = classes.join(' ');\n}\n\nfunction pad(value: string | number, size: number): string {\n  let padded = String(value);\n\n  while (padded.length < size) {\n    padded = '0' + padded;\n  }\n\n  return padded;\n}\n\n// Format a millisecond value to m:ss.SSS\n// If duration is greater than 60 minutes, value will be HHHH:mm:ss.SSS\n// (the hours value will not be converted to days)\nfunction formatDuration(duration: number): string {\n  let hours = Math.floor(duration / 3600000);\n  let minutes: string | number = Math.floor(duration / 60000) - hours * 60;\n  let seconds = Math.floor(duration / 1000) - hours * 3600 - minutes * 60;\n  let milliseconds =\n    duration - hours * 3600000 - minutes * 60000 - seconds * 1000;\n  let formattedValue = '';\n\n  if (hours) {\n    formattedValue = hours + ':';\n    minutes = pad(minutes, 2);\n  }\n\n  formattedValue +=\n    minutes + ':' + pad(seconds, 2) + '.' + pad(milliseconds, 3);\n\n  return formattedValue;\n}\n"]}