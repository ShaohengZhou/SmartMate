{"version":3,"file":"chatbot.component.core.js","sourceRoot":"","sources":["../../../../../src/components/interactions/chatbot/chatbot.component.core.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';\nimport { AmplifyService } from '../../../providers/amplify.service';\n\nconst template = `\n<div class=\"amplify-interactions\">\n\t<div class=\"amplify-interactions-container\">\n\t\t<div class=\"amplify-form-container\">\n\t\t\t<div class=\"amplify-form-row\">\n\t\t\t\t<div class=\"amplify-interactions-conversation\">\n\t\t\t\t\t<div *ngFor=\"let message of messages\">\n\t\t\t\t\t\t<div class=\"amplify-interactions-input\">{{message.me}}</div>\n\t\t\t\t\t\t<div class=\"amplify-interactions-input-timestamp\">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class=\"amplify-interactions-response\">{{message.bot}}</div>\n\t\t\t\t\t\t<div class=\"amplify-interactions-response-timestamp\">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"amplify-interactions-actions\">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype='text'\n\t\t\t\t\tclass=\"amplify-form-input\"\n\t\t\t\t\tplaceholder=\"Write a message\"\n\t\t\t\t\t[value]=\"inputText\"\n\t\t\t\t\t(keyup.enter)=\"onSubmit(inputValue.value)\"\n\t\t\t\t\t(change)=\"onInputChange($event.target.value)\">\n\n\t\t\t\t<button class=\"amplify-interactions-button\" (click)=\"onSubmit(inputValue.value)\"></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n`;\n\n@Component({\n\tselector: 'amplify-interactions-core',\n\ttemplate: template\n})\nexport class ChatbotComponentCore implements OnInit {\n\terrorMessage: string;\n\tamplifyService: AmplifyService;\n\tinputText:string = \"\";\n\tbotName:string;\n\tchatTitle:string;\n\tclearComplete:boolean = false;\n\tmessages:any = [];\n  completions:any = {};\n\n\t@Output()\n\tcomplete: EventEmitter<string> = new EventEmitter<string>();\n\n\tconstructor(amplifyService: AmplifyService) {\n\t\tthis.amplifyService = amplifyService;\n\t}\n\t\n\t@Input()\n\tset data(data: any){\n\t\tthis.botName = data.bot;\n\t\tthis.chatTitle = data.title;\n\t\tthis.clearComplete = data.clearComplete;\n\t\tthis.performOnComplete = this.performOnComplete.bind(this);\n\t\tthis.amplifyService.interactions().onComplete(this.botName,this.performOnComplete);\n\t}\n\n\n\t@Input()\n\tset bot(botName: string) {\n\t\tthis.botName = botName;\n\t\tthis.performOnComplete = this.performOnComplete.bind(this);\n\t\tthis.amplifyService.interactions().onComplete(botName,this.performOnComplete);\n\t}\n\n\t@Input()\n\tset title(title: string) {\n\t\tthis.chatTitle = title;\n\t}\n\n\t@Input()\n\tset clearOnComplete(clearComplete: boolean) {\n\t\tthis.clearComplete = clearComplete;\n\t}\n\n  ngOnInit(){\n    console.log(this)\n  }\n\n\tperformOnComplete(evt) {\n\t\tthis.complete.emit(evt);\n\t\tif (this.clearComplete) {\n\t\t\tthis.messages = [];\n\t\t}\n\t}\n\n\tonInputChange(value:string) {\n\t\tthis.inputText = value;\n  }\n  \n\n\n\tonSubmit(e) {\n\t\tif (!this.inputText) {\n\t\t\treturn;\n\t\t}\n\t\tlet message = {\n\t\t\t'me':this.inputText,\n\t\t\t'meSentTime': new Date().toLocaleTimeString(),\n\t\t\t'bot': '',\n\t\t\t'botSentTime': ''\n\t\t};\n\t\tthis.amplifyService.interactions().send(this.botName, this.inputText)\n\t\t\t.then((response:any) => {\n\t\t\t\tthis.inputText = \"\";\n\t\t\t\tconsole.log('Interactions Response: ', response);\n\t\t\t\tmessage.bot = response.message;\n\t\t\t\tmessage.botSentTime = new Date().toLocaleTimeString();\n\t\t\t\tthis.messages.push(message);\n\t\t\t})\n\t\t\t.catch((error) => console.log('Interactions Error: ', error));\n\t}\n\n}\n"]}